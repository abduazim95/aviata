(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{110:function(t,e,l){"use strict";l.r(e);l(54);var r=l(9),n=l(108),c=l.n(n),o=(l(55),l(31),l(22),l(16),l(39),l(29)),f={props:{item:{required:!0},filterName:{required:!0}},computed:{checked:function(){var t=this;return this.$store.getters["filters/filters"].some(function(filter){return filter.value===t.item.value})}},methods:{selected:function(t){this.checked?this.$emit("untick"):this.$emit("tick",this.item)}}},v=l(4),h=Object(v.a)(f,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"filter-item",on:{click:this.selected}},[e("div",{staticClass:"checkbox",class:{active:this.checked}}),this._v(" "),this._t("default")],2)},[],!1,null,null,null).exports,_=Object(v.a)({},function(){var t=this.$createElement,e=this._self._c||t;return e("svg",this._g({attrs:{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},this.$listeners),[e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.646 8.646L13.293 6l-2.647-2.646.707-.708L14 5.293l2.646-2.647.707.708L14.707 6l2.646 2.646-.707.708L14 6.707l-2.646 2.647-.708-.708zM2.915 6H8c0 .34.028.675.083 1H2.915a1.5 1.5 0 110-1zm5 4h1.613c.34.38.728.717 1.154 1H7.915a1.5 1.5 0 01-2.83 0H.5a.5.5 0 110-1h4.585a1.5 1.5 0 012.83 0zm-5 4a1.5 1.5 0 100 1H14.5a.5.5 0 100-1H2.915z",fill:"#B9B9B9"}})])},[],!1,null,null,null).exports,d=l(70);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(object);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,l)}return e}function C(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(source,!0).forEach(function(e){Object(o.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}var x,E={props:["filter"],data:function(){return{}},components:{FilterItem:h,ResetIcon:_},computed:C({},Object(d.b)({$filters:"filters/filters"}),{isVisibleReset:function(){var t=this;return this.$filters.some(function(filter){return filter.alias===t.filter.alias})},isCheckedAll:function(){var t=this;return this.$filters.filter(function(filter){return filter.alias===t.filter.alias}).length===this.filter.data.length}}),methods:C({},Object(d.c)("filters",["SET_FILTER","SET_GROUP_FILTERS","UNSET_FILTER","UNSET_GROUP_FILTERS"]),{setFilter:function(t){var e={alias:this.filter.alias,value:t.value};this.SET_FILTER(e)},setGroupFilters:function(){var t=this;if(this.isCheckedAll)this.UNSET_GROUP_FILTERS({alias:this.filter.alias});else{var e=this.filter.data.map(function(filter){return{alias:t.filter.alias,value:filter.value}});this.SET_GROUP_FILTERS(e)}},unsetFilter:function(t){var e={alias:this.filter.alias,value:t.value};this.UNSET_FILTER(e)},unsetGroupFilter:function(){this.UNSET_GROUP_FILTERS({alias:this.filter.alias})}})},k=Object(v.a)(E,function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("v-card",{staticClass:"filter mb-3 elevation-0",attrs:{color:"#f5f5f5"}},[l("v-card-title",{staticClass:"title"},[t._v(t._s(t.filter.title))]),t._v(" "),l("v-list",{staticClass:"p-0"},[t.filter.checkAll?l("div",{staticClass:"filter-item",on:{click:t.setGroupFilters}},[l("div",{staticClass:"checkbox",class:{active:t.isCheckedAll}}),t._v("\n        Все\n      ")]):t._e(),t._v(" "),t._l(t.filter.data,function(e){return l("filter-item",{key:e.value,attrs:{item:e,"filter-name":t.filter.alias},on:{tick:function(l){return t.setFilter(e)},untick:function(l){return t.unsetFilter(e)}}},[t._v(t._s(e.text))])})],2),t._v(" "),l("div",{staticClass:"reset-filter"},[t.isVisibleReset?l("reset-icon",{on:{click:t.unsetGroupFilter}}):t._e()],1)],1)},[],!1,null,null,null).exports,O=(l(109),l(202)),w=l(203),F=l(96),y={filters:{time:function(t){return Object(O.a)(Date.parse(t),"kk:mm")},date:function(t){return Object(O.a)(Date.parse(t),"d LLL, EEEEEE.",{locale:w.a})},duration:function(t){return Object(F.a)(1e3*t)}},props:{flight:{required:!0},airlines:{required:!0}},computed:{withLuggage:function(){var t=this.flight.itineraries[0][0].segments[0].baggage_options[0].value,e=this.flight.itineraries[0][0].segments[0].baggage_options[0].unit;return t>0&&t+e}},methods:{image:function(code){return"https://aviata.kz/static/airline-logos/80x80/".concat(code,".png")},airline:function(code){return this.airlines.find(function(t){return t.value===code}).text}}},L=Object(v.a)(y,function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("v-card",{staticClass:"flights elevation-1 mb-5 overflow-hidden"},[l("v-row",{staticClass:"ma-0 fill-height"},[l("v-col",{attrs:{lg:"9"}},[l("v-row",[l("v-col",{staticClass:"d-flex align-items-center",attrs:{lg:"3",cols:"12"}},[l("img",{staticClass:"carier_logo",attrs:{src:t.image(t.flight.validating_carrier)}}),t._v(" "),l("span",{staticClass:"carrier_name"},[t._v(t._s(t.airline(t.flight.validating_carrier)))])]),t._v(" "),l("v-col",{attrs:{lg:"9",cols:"12"}},[l("v-row",{staticClass:"flight-itinerary"},[l("v-col",{staticClass:"datetime"},[l("small",[t._v(t._s(t._f("date")(t.flight.itineraries[0][0].dep_date)))]),t._v(" "),l("span",{staticClass:"datetime_date"},[t._v(t._s(t._f("time")(t.flight.itineraries[0][0].dep_date)))])]),t._v(" "),l("v-col",{staticClass:"text-center",attrs:{lg:"6",cols:"12"}},[l("div",{staticClass:"layovers_duration"},[t._v(t._s(t._f("duration")(t.flight.itineraries[0][0].traveltime)))]),t._v(" "),l("div",{staticClass:"layovers_line"}),t._v(" "),l("div",{staticClass:"layovers_stops forward"},[0==t.flight.itineraries[0][0].stops?l("span",[t._v("прямой рейс")]):1==t.flight.itineraries[0][0].stops?l("span",[t._v(t._s("через "+t.flight.itineraries[0][0].segments[0].airport_dest))]):t.flight.itineraries[0][0].stops>1?l("span",[t._v(t._s(t.flight.itineraries[0][0].stops+" пересадки"))]):t._e()])]),t._v(" "),l("v-col",{staticClass:"datetime"},[l("small",[t._v(t._s(t._f("date")(t.flight.itineraries[0][0].arr_date)))]),t._v(" "),l("span",{staticClass:"datetime_date"},[t._v(t._s(t._f("time")(t.flight.itineraries[0][0].arr_date)))])])],1)],1)],1),t._v(" "),l("v-row",[l("v-col",{staticClass:"text-center",attrs:{lg:"3",cols:"6"}},[l("a",{staticClass:"footer-link",attrs:{href:"#"}},[t._v("Детали перелета")])]),t._v(" "),l("v-col",{attrs:{lg:"3",cols:"6"}},[l("a",{staticClass:"footer-link",attrs:{href:"#"}},[t._v("Условия тарифа")])]),t._v(" "),l("v-col",{attrs:{lg:"3",cols:"12"}},[t.flight.refundable?t._e():l("div",{staticClass:"refundable"},[l("v-icon",[t._v("fas fa-undo-alt")]),t._v(" "),l("span",[t._v("Невозвратный")])],1)])],1)],1),t._v(" "),l("v-col",{staticClass:"bg-grey"},[l("div",{staticClass:"price"},[l("span",[t._v(t._s(t.flight.price)+" ₸")]),t._v(" "),l("v-button",{staticClass:"choose-btn",attrs:{type:"success",block:"",color:"#55BB06"}},[t._v("\n              Выбрать\n\t\t\t\t\t")]),t._v(" "),l("small",[t._v("Цена за всех пассажиров")])],1),t._v(" "),l("div",{staticClass:"luggage-service text-center"},[t.withLuggage?l("small",[t._v(t._s(t.withLuggage))]):l("small",[t._v("Нет багажа")]),t._v(" "),l("button",{staticClass:"add-luggage-btn"},[t._v("\n\t\t\t\t\t\t+ Добавить багаж\n\t\t\t\t\t")])])])],1)],1)},[],!1,null,null,null).exports,T=[{text:"Air Astana",value:"KC"},{text:"Uzbekistan Airways",value:"HY"},{text:"Emirates",value:"EK"},{text:"HR",value:"HR"},{text:"Flydubai",value:"FZ"},{text:"S7 Airlines",value:"S7"},{text:"Lufthansa",value:"LH"},{text:"Air Baltic",value:"BT"},{text:"China Southern Airlines",value:"CZ"},{text:"Aeroflot",value:"SU"},{text:"Belavia",value:"B2"},{text:"SCAT Airlines",value:"DV"},{text:"Turkish Airlines",value:"TK"}],R=[{checkAll:!1,title:"Опции тарифа",alias:"options",data:[{text:"Только прямые",value:"onlyDirectFlight"},{text:"Только с багажом",value:"onlyWithLuggage"},{text:"Только возвратные",value:"onlyReturnable"}]},{checkAll:!0,title:"Авиакомпании",alias:"airlines",data:[].concat(T)}],S={head:function(){return{title:"Поиск билетов"}},components:{filterItem:k,Flights:L},data:function(){return{filters:R,airlines:T,flights:[]}},computed:{$filters:function(){return this.$store.getters["filters/filters"]}},watch:{$filters:function(t){var data={};t.forEach(function(filter){data[filter.alias]?data[filter.alias].push(filter.value):data[filter.alias]=[filter.value]}),this.getFlights(data)}},methods:{resetAllFilters:function(){this.$store.commit("filters/UNSET_ALL_FILTERS")},getFlights:(x=Object(r.a)(regeneratorRuntime.mark(function t(){var data,e,l=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return data=l.length>0&&void 0!==l[0]?l[0]:null,t.prev=1,t.next=4,c.a.get("/api/flights",{params:data});case 4:e=t.sent,this.flights=e.data,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),t.t0.response?alert(t.t0.response.data.message):alert("Не удается подключиться к удаленному серверу!");case 11:case"end":return t.stop()}},t,this,[[1,8]])})),function(){return x.apply(this,arguments)})},created:function(){this.getFlights()}},j=Object(v.a)(S,function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("v-layout",{staticClass:"row"},[l("v-col",{staticClass:"filters pl-0",attrs:{lg:"3",md:"3",sm:"12",cols:"12"}},[t._l(t.filters,function(filter){return l("filter-item",{key:filter.alias,attrs:{filter:filter}})}),t._v(" "),l("a",{staticClass:"filter-resetall",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.resetAllFilters(e)}}},[t._v("Сбросить все фильтры")])],2),t._v(" "),l("v-col",{staticClass:"px-0",attrs:{lg:"9",md:"9",sm:"12",cols:"12"}},t._l(t.flights,function(e){return l("Flights",{key:e.id,attrs:{airlines:t.airlines,flight:e}})}),1)],1)},[],!1,null,null,null);e.default=j.exports}}]);